{"version":3,"file":"index.es.js","mappings":"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","sources":["webpack://scroll-rise/webpack/bootstrap","webpack://scroll-rise/webpack/runtime/define property getters","webpack://scroll-rise/webpack/runtime/hasOwnProperty shorthand","webpack://scroll-rise/./src/util.ts","webpack://scroll-rise/./src/scroll-rise.ts","webpack://scroll-rise/./src/scroll-rise-speed.ts","webpack://scroll-rise/./src/models/scenes/scene.model.ts","webpack://scroll-rise/./src/models/scenes/sticky-platform.scene.ts","webpack://scroll-rise/./src/models/scenes/fixed-actors.scene.ts","webpack://scroll-rise/./src/models/time-frame.model.ts","webpack://scroll-rise/./src/models/actors/actor.model.ts","webpack://scroll-rise/./src/models/actors/initiable.actor.ts","webpack://scroll-rise/./src/models/actors/static.actor.ts","webpack://scroll-rise/./src/models/actors/ref.actor.ts","webpack://scroll-rise/./src/models/motions/motion.model.ts","webpack://scroll-rise/./src/models/motions/move.motion.ts","webpack://scroll-rise/./src/models/motions/size.motion.ts","webpack://scroll-rise/./src/models/motions/opacity.motion.ts","webpack://scroll-rise/./src/models/motions/bound.motion.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { WindowSizes } from './window-sizes';\n\nexport class Util {\n\n  static castToInt(num: number): number {\n    return Math.round(num);\n  }\n\n  /**\n   * @returns The interior width of the browser window in pixels. This doesn't include the width of the vertical scrollbar.\n   */\n  static clientWidth(): number {\n    return document.documentElement.clientWidth;\n  }\n\n  /**\n   * @returns The interior height of the browser window in pixels. This doesn't include the height of the horizontal scrollbar.\n   */\n  static clientHeight(): number {\n    return document.documentElement.clientHeight;\n  }\n\n  /**\n   * @returns The interior width of the browser window in pixels. This includes the width of the vertical scrollbar, if one is present.\n   */\n  static innerWidth(): number {\n    return window.innerWidth;\n  }\n\n  /**\n   * @returns The interior height of the browser window in pixels. This includes the height of the horizontal scrollbar, if one is present.\n   */\n  static innerHeight(): number {\n    return window.innerHeight;\n  }\n\n  /**\n   * @returns Full document height, with scrolled out part in pixels.\n   */\n  static documentHeight(): number {\n    return Math.max(\n      document.body.scrollHeight, document.documentElement.scrollHeight,\n      document.body.offsetHeight, document.documentElement.offsetHeight,\n      document.body.clientHeight, document.documentElement.clientHeight,\n    );\n  }\n\n  static windowSizes(): WindowSizes {\n    return {\n      clientWidth: this.clientWidth(),\n      clientHeight: this.clientHeight(),\n      innerWidth: this.innerWidth(),\n      innerHeight: this.innerHeight(),\n      documentHeight: this.documentHeight(),\n    };\n  }\n\n  static logWindowSizes(): void {\n    console.log('Window size:');\n    console.log('document.documentElement.clientWidth, clientHeight', document.documentElement.clientWidth, document.documentElement.clientHeight);\n    console.log('document.documentElement.scrollWidth, scrollHeight', document.documentElement.scrollWidth, document.documentElement.scrollHeight);\n    console.log('document.body.scrollWidth, scrollHeight', document.body.scrollWidth, document.body.scrollHeight);\n    console.log('document.body.offsetWidth, offsetHeight', document.body.offsetWidth, document.body.offsetHeight);\n    console.log('document.documentElement.offsetWidth, offsetHeight', document.documentElement.offsetWidth, document.documentElement.offsetHeight);\n    console.log('document.body.clientWidth, clientHeight', document.body.clientWidth, document.body.clientHeight);\n    console.log('window.innerWidth, innerHeight', window.innerWidth, window.innerHeight);\n  }\n\n}\n","import { Util } from './util';\nimport { SceneModel, SceneOptions } from './models/scenes/scene.model';\n\nexport class ScrollRise {\n\n  private initialized = false;\n  private ticking = false;\n  private scrollListener?: (() => void);\n  private resizeListener?: (() => void);\n\n  private displayWidth: number;\n  private displayHeight: number;\n\n  constructor(\n    public scene: SceneModel<SceneOptions>,\n  ) {\n    this.saveDisplaySize();\n    this.init();\n    this.tick();\n  }\n\n  saveDisplaySize(): void {\n    this.displayWidth = Util.clientWidth();\n    this.displayHeight = Util.clientHeight();\n  }\n\n  isNeedResize(): boolean {\n    return true;\n  }\n\n  tick(): void {\n    if (!this.ticking) {\n      window?.requestAnimationFrame(() => {\n        this.render(this.scene.elementY());\n        this.ticking = false;\n      });\n\n      this.ticking = true;\n    }\n  }\n\n  pos(scrollPos: number): number {\n    return -(scrollPos + this.scene.offset());\n  }\n\n  scroll(): void {\n    this.tick();\n  }\n\n  resize(): void {\n    if (this.isNeedResize()) {\n      this.scene.resizeHeight();\n      this.tick();\n    }\n  }\n\n  private init(): void {\n    if (!this.initialized) {\n      this.initialized = true;\n      this.scrollListener = this.scroll.bind(this);\n      window?.addEventListener('scroll', this.scrollListener!);\n      this.resizeListener = this.resize.bind(this);\n      window?.addEventListener('resize', this.resizeListener!);\n      this.tick();\n    } else {\n      throw new Error('Scroll-Rise has already been initialized');\n    }\n  }\n\n  stop(): void {\n    if (this.initialized) {\n      this.initialized = false;\n      if (this.scrollListener !== undefined) {\n        window?.removeEventListener('scroll', this.scrollListener);\n      }\n      if (this.resizeListener !== undefined) {\n        window?.removeEventListener('resize', this.resizeListener);\n      }\n    } else {\n      throw new Error('Scroll-Rise hasn\\'t yet been initialized');\n    }\n  }\n\n  render(scrollPos: number): void {\n    for (const actor of this.scene.actors) {\n      actor.render(this.pos(scrollPos), this.scene);\n    }\n  }\n\n}\n","export class ScrollRiseSpeed {\n\n  private mouseupListener?: () => void;\n  private mousedownListener?: () => void;\n  private mousewheelListener?: (e: any) => void;\n\n  constructor(\n    public container: HTMLElement,\n    protected options?: {\n      deltaY?: number;\n      limitY?: number;\n      excludeIds?: string[];\n    },\n  ) {}\n\n  handleScrollReset(): void {\n    // eslint-disable-next-line no-global-assign\n    scrollY = this.container.scrollTop;\n  }\n\n  exclude(e: any): any {\n    if (this.options?.excludeIds?.length) {\n      return document.elementsFromPoint(e.clientX, e.clientY).find(element => this.options?.excludeIds?.includes(element.id));\n    }\n  }\n\n  handleMouseWheel(e: any): void {\n    if (!this.exclude(e)) {\n      e.preventDefault();\n      let delta: number = e.deltaY;\n      delta = this.options?.deltaY ? delta * this.options.deltaY : delta;\n      if (this.options?.limitY && Math.abs(delta) > this.options.limitY) {\n        delta = delta > 0 ? this.options.limitY : -this.options.limitY;\n      }\n      // eslint-disable-next-line no-global-assign\n      scrollY += delta;\n      if (scrollY > 0) {\n        const limitY = this.container.scrollHeight - this.container.clientHeight;\n        if (scrollY > limitY) {\n          // eslint-disable-next-line no-global-assign\n          scrollY = limitY;\n        }\n      } else {\n        // eslint-disable-next-line no-global-assign\n        scrollY = 0;\n      }\n      window?.scrollTo(0, scrollY);\n    }\n  }\n\n  init(): void {\n    this.mouseupListener = this.handleScrollReset.bind(this);\n    this.mousedownListener = this.handleScrollReset.bind(this);\n    this.mousewheelListener = this.handleMouseWheel.bind(this);\n    this.container.addEventListener('mouseup', this.mouseupListener!, false);\n    this.container.addEventListener('mousedown', this.mousedownListener!, false);\n    this.container.addEventListener('mousewheel', this.mousewheelListener!, {\n      passive: false,\n    });\n    this.container.addEventListener('DOMMouseScroll', this.mousewheelListener!, {\n      passive: false,\n    });\n    this.container.addEventListener('wheel', this.mousewheelListener!, {\n      passive: false,\n    });\n  }\n\n  stop(): void {\n    if (this.mouseupListener) {\n      this.container.removeEventListener('mouseup', this.mouseupListener);\n    }\n    if (this.mousedownListener) {\n      this.container.removeEventListener('mousedown', this.mousedownListener);\n    }\n    if (this.mousewheelListener) {\n      this.container.removeEventListener('mousewheel', this.mousewheelListener);\n      this.container.removeEventListener('DOMMouseScroll', this.mousewheelListener);\n      this.container.removeEventListener('wheel', this.mousewheelListener);\n    }\n  }\n\n}\n","import { Actor } from '../actors/actor.model';\nimport { Util } from '../../util';\nimport { TimeFrame } from '../time-frame.model';\n\nexport interface SceneOptions {\n  offset?: (deviceWidth: number, deviceHeight: number, sceneHeight: number) => number;\n}\n\nexport abstract class SceneModel<Options extends SceneOptions> {\n\n  protected _actors: Actor[] = [];\n  public abstract name: string;\n\n  protected abstract init(): void;\n  public abstract resizeHeight(): void;\n\n  constructor(\n    protected el: HTMLElement,\n    protected height: (deviceWidth: number, deviceHeight: number) => number,\n    protected options?: Options,\n  ) {\n    this.setDefaults();\n    this.init();\n  }\n\n  protected setDefaults(): void {\n    this.options = {\n      ...this.defaults(),\n      ...this.options,\n    } as Options;\n  }\n\n  defaults(): SceneOptions {\n    return {\n      offset: () => 0,\n    };\n  }\n\n  offset(): number {\n    return this.options!.offset!(\n      Util.clientWidth(),\n      Util.clientHeight(),\n      this.elementHeight(),\n    );\n  }\n\n  elementY(): number {\n    return this.el.getBoundingClientRect().y;\n  }\n\n  elementHeight(): number {\n    return this.height(Util.clientWidth(), Util.clientHeight());\n  }\n\n  add(actor: Actor): void {\n    this._actors.push(actor);\n  }\n\n  get actors(): Actor[] {\n    return this._actors;\n  }\n\n  public interceptY(scrollPos: number, frame: TimeFrame, startY: () => number, endY: () => number): number | undefined {\n    return undefined;\n  }\n\n}\n","import { Actor } from '../actors/actor.model';\nimport { Util } from '../../util';\nimport { SceneModel, SceneOptions } from './scene.model';\nimport { TimeFrame } from '../time-frame.model';\n\nexport interface StickyPlatformSceneOptions extends SceneOptions {\n  stickyPlatformHeight?: (deviceWidth: number, deviceHeight: number) => number;\n}\n\nexport class StickyPlatformScene extends SceneModel<StickyPlatformSceneOptions> {\n\n  public override name = 'StickyPlatformScene';\n\n  public platform: HTMLElement;\n\n  override defaults(): StickyPlatformSceneOptions {\n    return {\n      ...super.defaults(),\n      stickyPlatformHeight: (deviceWidth: number, deviceHeight: number) => deviceHeight,\n    };\n  }\n\n  override resizeHeight(): void {\n    this.el.style.height = `${this.height(Util.clientWidth(), Util.clientHeight())}px`;\n    this.resizePlatform();\n  }\n\n  resizePlatform(): void {\n    this.platform.style.height = `${this.options!.stickyPlatformHeight!(Util.clientWidth(), Util.clientHeight())}px`;\n  }\n\n  protected override init(): void {\n    this.el.style.position = 'relative';\n    this.el.style.overflow = 'visible';\n\n    this.platform = document.createElement('div');\n    this.platform.style.position = 'sticky';\n    this.platform.style.top = '0';\n    this.platform.style.left = '0';\n    this.platform.style.width = '100%';\n    this.resizeHeight();\n\n    this.el.appendChild(this.platform);\n  }\n\n  override add(actor: Actor): void {\n    super.add(actor);\n    if (this.el === actor.element?.parentElement) {\n      this.platform.appendChild(actor.element);\n      actor.element.style.position = 'absolute';\n    }\n    actor.initElement(this.elementY(), this);\n  }\n\n  interceptY(scrollPos: number, frame: TimeFrame, startY: () => number, endY: () => number): number | undefined {\n    if (scrollPos < frame.getStartPos()) {\n      return startY();\n    }\n    if (scrollPos > frame.getEndPos()) {\n      return endY();\n    }\n\n    return super.interceptY(scrollPos, frame, startY, endY);\n  }\n\n}\n","import { Actor } from '../actors/actor.model';\nimport { Util } from '../../util';\nimport { SceneModel, SceneOptions } from './scene.model';\nimport { TimeFrame } from '../time-frame.model';\n\nexport class FixedActorsScene extends SceneModel<SceneOptions> {\n\n  public override name = 'FixedActorsScene';\n\n  override resizeHeight(): void {\n    this.el.style.height = `${this.height(Util.clientWidth(), Util.clientHeight())}px`;\n  }\n\n  protected override init(): void {\n    this.resizeHeight();\n  }\n\n  override add(actor: Actor): void {\n    super.add(actor);\n    actor.element!.style.position = 'fixed';\n    actor.initElement(this.elementY(), this);\n  }\n\n  interceptY(scrollPos: number, frame: TimeFrame, startY: () => number, endY: () => number): number | undefined {\n    if (scrollPos < frame.getStartPos()) {\n      return this.elementY() + startY();\n    }\n    const left = this.elementHeight() + this.elementY();\n    if (left < Util.clientHeight()) {\n      const d = Util.clientHeight() - left;\n      return endY() - d;\n    }\n\n    return super.interceptY(scrollPos, frame, startY, endY);\n  }\n\n}\n","import { Motion } from './motions/motion.model';\nimport { Util } from '../util';\n\nexport class TimeFrame {\n\n  constructor(\n    public motion: Motion,\n    public start: (deviceWidth: number, deviceHeight: number) => number,\n    public end: (deviceWidth: number, deviceHeight: number) => number = start,\n  ) {\n    if (end === undefined) {\n      this.end = start;\n    } else {\n      if (this.getStartPos() > this.getEndPos()) {\n        throw new SyntaxError('\"Start\" later than \"End\" in the frame');\n      }\n    }\n  }\n\n  getStartPos(): number {\n    return this.start(Util.clientWidth(), Util.clientHeight());\n  }\n\n  getEndPos(): number {\n    return this.end(Util.clientWidth(), Util.clientHeight());\n  }\n\n  length(): number {\n    return this.getEndPos() - this.getStartPos();\n  }\n\n}\n","import { TimeFrame } from '../time-frame.model';\nimport { Util } from '../../util';\nimport { SceneModel } from '../scenes/scene.model';\n\nexport abstract class Actor {\n\n  public element?: HTMLElement;\n  abstract bindElement(scrollPosOnFrame: number, scene: SceneModel<any>): HTMLElement | undefined;\n\n  protected frames: TimeFrame[] = [];\n\n  abstract findFirstMoveMotionFrame(): TimeFrame;\n\n  afterBindElement(): void {}\n\n  beforeRender?: () => void;\n  afterRender?: () => void;\n\n  private groupFramesByMotion(frames: TimeFrame[]): { [key: string]: TimeFrame[] } {\n    return frames.reduce(\n      (acc: any, frame) => {\n        const motionName = frame.motion.name;\n        acc[motionName] = acc[motionName] ? [...acc[motionName], frame] : [frame];\n\n        return acc;\n      },\n      {},\n    );\n  }\n\n  render(scrollPos: number, scene: SceneModel<any>): void {\n    if (this.beforeRender) {\n      this.beforeRender();\n    }\n\n    const frames = this.groupFramesByMotion(this.frames);\n\n    for (const key of Object.keys(frames)) {\n      if (frames[key].length > 1) {\n        const visible = frames[key].filter(\n          frame =>\n            (scrollPos < frame.getStartPos() && scrollPos + Util.clientHeight() >= frame.getStartPos()) ||\n            (scrollPos >= frame.getStartPos() && scrollPos + Util.clientHeight() <= frame.getEndPos()) ||\n            (scrollPos >= frame.getStartPos() && scrollPos <= frame.getEndPos()),\n        );\n\n        if (visible.length === 1) {\n          frames[key] = visible;\n        } else if (visible.length === 0 && frames[key].length) {\n          frames[key].sort((a, b) => a.getStartPos() - b.getStartPos());\n          if (scrollPos + Util.clientHeight() < frames[key][0].getStartPos()) {\n            frames[key] = [frames[key][0]];\n          } else {\n            frames[key].sort((a, b) => {\n              if (a.getEndPos() > b.getEndPos()) {\n                return -1;\n              } else if (a.getEndPos() > b.getEndPos()) {\n                return 0;\n              }\n              return 1;\n            });\n            if (scrollPos > frames[key][0].getEndPos()) {\n              frames[key] = [frames[key][0]];\n            }\n          }\n        } else {\n          visible.sort((a, b) => a.getStartPos() - b.getStartPos());\n          frames[key] = [visible[visible.length - 1]];\n        }\n      }\n    }\n\n    if (this.element) {\n      for (const key of Object.keys(frames)) {\n        if (frames[key]?.length) {\n          frames[key][0].motion.make(scrollPos, frames[key][0], this.element, scene);\n        }\n      }\n    }\n\n    if (this.afterRender) {\n      this.afterRender();\n    }\n  }\n\n  addFrame(frame: TimeFrame): void {\n    this.frames.push(frame);\n  }\n\n  addFrames(frames: TimeFrame[]): void {\n    this.frames = this.frames.concat(frames);\n  }\n\n  initElement(scrollPosOnFrame: number, scene: SceneModel<any>): void {\n    this.element = this.bindElement(scrollPosOnFrame, scene);\n    this.afterBindElement();\n  }\n\n}\n","import { Actor } from './actor.model';\nimport { TimeFrame } from '../time-frame.model';\nimport { Dimensions } from '../dimensions';\nimport { SizeMotion } from '../motions/size.motion';\nimport { OpacityMotion } from '../motions/opacity.motion';\nimport { Value } from '../value.model';\nimport { SceneModel } from '../scenes/scene.model';\n\nexport abstract class InitiableActor extends Actor {\n\n  findFirstFrame(motionName: string): TimeFrame | undefined {\n    return this.frames.reduce(\n      (acc: TimeFrame | undefined, frame: TimeFrame) => {\n        if (frame.motion.name === motionName) {\n          if (acc) {\n            if (frame.getStartPos() < acc?.getStartPos()) {\n              return frame;\n            } else {\n              return acc;\n            }\n          } else {\n            return frame;\n          }\n        } else {\n          if (acc) {\n            return acc;\n          }\n          return undefined;\n        }\n      },\n      undefined,\n    );\n  }\n\n  findFirstMoveMotionFrame(): TimeFrame {\n    const firstFrame = this.findFirstFrame('MoveMotion');\n\n    if (firstFrame) {\n      return firstFrame;\n    } else {\n      throw new Error('First \"MoveMotion\" frame wasn\\'t found');\n    }\n  }\n\n  calcStartSize(): Dimensions {\n    const firstFrame = this.findFirstFrame('SizeMotion');\n\n    if (firstFrame) {\n      const motion = firstFrame.motion as SizeMotion;\n      return { width: motion.startWidth, height: motion.startHeight };\n    } else {\n      throw new Error('First \"SizeMotion\" frame wasn\\'t found');\n    }\n  }\n\n  calcStartOpacity(): Value {\n    const firstFrame = this.findFirstFrame('OpacityMotion');\n\n    if (firstFrame) {\n      const motion = firstFrame.motion as OpacityMotion;\n      return motion.start;\n    } else {\n      throw new Error('First \"OpacityMotion\" frame wasn\\'t found');\n    }\n  }\n\n  override bindElement(scrollPosOnFrame: number, scene: SceneModel<any>): HTMLElement | undefined {\n    return this.element;\n  }\n\n}\n","import { InitiableActor } from './initiable.actor';\nimport { Util } from '../../util';\nimport { MoveMotion } from '../motions/move.motion';\nimport { SceneModel } from '../scenes/scene.model';\n\nexport interface StaticActorOptions {\n  initPosition?: boolean;\n  initSize?: boolean;\n  initOpacity?: boolean;\n}\n\nexport class StaticActor extends InitiableActor {\n\n  constructor(\n    public override element: HTMLElement | undefined,\n    public options?: StaticActorOptions,\n  ) {\n    super();\n    this.options = {\n      initPosition: true,\n      initSize: true,\n      initOpacity: true,\n      ...this.options,\n    };\n  }\n\n  override bindElement(scrollPosOnFrame: number, scene: SceneModel<any>): HTMLElement | undefined {\n    if (this.element) {\n      if (this.options?.initPosition) {\n        const timeFrame = this.findFirstMoveMotionFrame();\n        (timeFrame.motion as MoveMotion).make(scrollPosOnFrame, timeFrame, this.element, scene);\n      }\n      if (this.options?.initSize) {\n        const startDimensions = this.calcStartSize();\n        this.element.style.width = `${startDimensions.width(Util.clientWidth(), Util.clientHeight())}px`;\n        this.element.style.height = `${startDimensions.height(Util.clientWidth(), Util.clientHeight())}px`;\n      }\n      if (this.options?.initOpacity) {\n        const startOpacity = this.calcStartOpacity();\n        this.element.style.opacity = `${startOpacity(Util.clientWidth(), Util.clientHeight())}`;\n      }\n    }\n    return this.element;\n  }\n\n}\n","import { InitiableActor } from './initiable.actor';\n\nexport class RefActor extends InitiableActor {\n\n  constructor(\n    public override element: HTMLElement | undefined,\n  ) {\n    super();\n  }\n\n  override bindElement(): HTMLElement | undefined {\n    return this.element;\n  }\n\n}\n","import { TimeFrame } from '../time-frame.model';\nimport { SceneModel } from '../scenes/scene.model';\n\nexport abstract class Motion {\n\n  abstract name: string;\n\n  abstract make(\n    scrollPosForFrame: number,\n    frame: TimeFrame,\n    element: HTMLElement,\n    scene: SceneModel<any>,\n  ): void;\n\n}\n","import { Value } from '../value.model';\nimport { Motion } from './motion.model';\nimport { TimeFrame } from '../time-frame.model';\nimport { Util } from '../../util';\nimport { SceneModel } from '../scenes/scene.model';\n\nexport interface IMoveMotion {\n  startX: Value;\n  endX: Value;\n  startY: Value;\n  endY: Value;\n}\n\nexport class MoveMotion extends Motion {\n\n  override name = 'MoveMotion';\n\n  startX: Value;\n  endX: Value;\n  startY: Value;\n  endY: Value;\n\n  constructor(data: IMoveMotion) {\n    super();\n\n    this.startX = data.startX;\n    this.endX = data.endX;\n    this.startY = data.startY;\n    this.endY = data.endY;\n  }\n\n  renderX(scrollPos: number, frame: TimeFrame, element: HTMLElement): void {\n    if (element) {\n      if (scrollPos < frame.getStartPos()) {\n        element.style.left = `${this.startX(Util.clientWidth(), Util.clientHeight())}px`;\n        return;\n      }\n      if (scrollPos > frame.getEndPos()) {\n        element.style.left = `${this.endX(Util.clientWidth(), Util.clientHeight())}px`;\n        return;\n      }\n\n      const motionL = this.endX(Util.clientWidth(), Util.clientHeight()) - this.startX(Util.clientWidth(), Util.clientHeight());\n      const d = motionL / frame.length();\n      const x = Util.castToInt(this.startX(Util.clientWidth(), Util.clientHeight()) + d * (scrollPos - frame.getStartPos()));\n\n      element.style.left = `${x}px`;\n    }\n  }\n\n  renderY(scrollPos: number, frame: TimeFrame, element: HTMLElement, scene: SceneModel<any>): void {\n    const startY = (): number => this.startY(Util.clientWidth(), Util.clientHeight());\n    const endY = (): number => this.endY(Util.clientWidth(), Util.clientHeight());\n\n    if (element) {\n      const motionL = endY() - startY();\n      const d = motionL / frame.length();\n      let y = Util.castToInt(startY() + d * (frame.getStartPos() + scrollPos));\n\n      const sceneInterceptor = scene.interceptY(scrollPos, frame, startY, endY);\n      if (sceneInterceptor !== undefined) {\n        y = sceneInterceptor;\n      }\n\n      element.style.top = `${y}px`;\n    }\n  }\n\n  make(scrollPosOnFrame: number, frame: TimeFrame, element: HTMLElement, scene: SceneModel<any>): void {\n    this.renderX(scrollPosOnFrame, frame, element);\n    this.renderY(scrollPosOnFrame, frame, element, scene);\n  }\n\n}\n","import { Value } from '../value.model';\nimport { Motion } from './motion.model';\nimport { TimeFrame } from '../time-frame.model';\nimport { Util } from '../../util';\n\nexport interface ISizeMotion {\n  startWidth: Value;\n  endWidth: Value;\n  startHeight: Value;\n  endHeight: Value;\n}\n\nexport class SizeMotion extends Motion {\n\n  override name = 'SizeMotion';\n\n  startWidth: Value;\n  endWidth: Value;\n  startHeight: Value;\n  endHeight: Value;\n\n  constructor(data: ISizeMotion) {\n    super();\n\n    this.startWidth = data.startWidth;\n    this.endWidth = data.endWidth;\n    this.startHeight = data.startHeight;\n    this.endHeight = data.endHeight;\n  }\n\n  renderWidth(scrollPos: number, frame: TimeFrame, element: HTMLElement): void {\n    if (element) {\n      if (scrollPos < frame.getStartPos()) {\n        element.style.width = `${this.startWidth(Util.clientWidth(), Util.clientHeight())}px`;\n        return;\n      }\n      if (scrollPos > frame.getEndPos()) {\n        element.style.width = `${this.endWidth(Util.clientWidth(), Util.clientHeight())}px`;\n        return;\n      }\n\n      const motionL = this.endWidth(Util.clientWidth(), Util.clientHeight()) - this.startWidth(Util.clientWidth(), Util.clientHeight());\n      const d = motionL / frame.length();\n      const width = this.startWidth(Util.clientWidth(), Util.clientHeight()) + d * (scrollPos - frame.getStartPos());\n\n      element.style.width = `${width}px`;\n    }\n  }\n\n  renderHeight(scrollPos: number, frame: TimeFrame, element: HTMLElement): void {\n    if (element) {\n      if (scrollPos < frame.getStartPos()) {\n        element.style.height = `${this.startHeight(Util.clientWidth(), Util.clientHeight())}px`;\n        return;\n      }\n      if (scrollPos > frame.getEndPos()) {\n        element.style.height = `${this.endHeight(Util.clientWidth(), Util.clientHeight())}px`;\n        return;\n      }\n\n      const motionL = this.endHeight(Util.clientWidth(), Util.clientHeight()) - this.startHeight(Util.clientWidth(), Util.clientHeight());\n      const d = motionL / frame.length();\n      const height = this.startHeight(Util.clientWidth(), Util.clientHeight()) + d * (scrollPos - frame.getStartPos());\n\n      element.style.height = `${height}px`;\n    }\n  }\n\n  override make(scrollPosForFrame: number, frame: TimeFrame, element: HTMLElement): void {\n    this.renderWidth(scrollPosForFrame, frame, element);\n    this.renderHeight(scrollPosForFrame, frame, element);\n  }\n\n}\n","import { Value } from '../value.model';\nimport { Motion } from './motion.model';\nimport { TimeFrame } from '../time-frame.model';\nimport { Util } from '../../util';\n\nexport interface IOpacityMotion {\n  start: Value;\n  end: Value;\n}\n\nexport class OpacityMotion extends Motion {\n\n  override name = 'OpacityMotion';\n\n  start: Value;\n  end: Value;\n\n  constructor(data: IOpacityMotion) {\n    super();\n\n    this.start = data.start;\n    this.end = data.end;\n  }\n\n  renderOpacity(scrollPos: number, frame: TimeFrame, element: HTMLElement): void {\n    if (element) {\n      if (scrollPos < frame.getStartPos()) {\n        element.style.opacity = this.start(Util.clientWidth(), Util.clientHeight()).toString();\n        return;\n      }\n      if (scrollPos > frame.getEndPos()) {\n        element.style.opacity = this.end(Util.clientWidth(), Util.clientHeight()).toString();\n        return;\n      }\n\n      const motionL = this.end(Util.clientWidth(), Util.clientHeight()) - this.start(Util.clientWidth(), Util.clientHeight());\n      const d = motionL / frame.length();\n      const opacity = this.start(Util.clientWidth(), Util.clientHeight()) + d * (scrollPos - frame.getStartPos());\n\n      element.style.opacity = opacity.toString();\n    }\n  }\n\n  override make(scrollPosForFrame: number, frame: TimeFrame, element: HTMLElement): void {\n    this.renderOpacity(scrollPosForFrame, frame, element);\n  }\n\n}\n","import { Motion } from './motion.model';\nimport { TimeFrame } from '../time-frame.model';\nimport { Util } from '../../util';\n\nexport declare type BoundValue = (deviceWidth: number, deviceHeight: number) => Partial<CSSStyleDeclaration>;\n\nexport interface IBoundMotion {\n  before: BoundValue;\n  after: BoundValue;\n}\n\nexport class BoundMotion extends Motion {\n\n  override name = 'BoundMotion';\n\n  before: BoundValue;\n  after: BoundValue;\n\n  constructor(data: IBoundMotion) {\n    super();\n\n    this.before = data.before;\n    this.after = data.after;\n  }\n\n  applyProperties(element: HTMLElement, properties: Partial<CSSStyleDeclaration>): void {\n    for (const property of Object.keys(properties)) {\n      element.style[property] = properties[property];\n    }\n  }\n\n  override make(scrollPosForFrame: number, frame: TimeFrame, element: HTMLElement): void {\n    if (element) {\n      if (scrollPosForFrame < frame.getStartPos()) {\n        this.applyProperties(element, this.before(Util.clientWidth(), Util.clientHeight()));\n      } else {\n        this.applyProperties(element, this.after(Util.clientWidth(), Util.clientHeight()));\n      }\n    }\n  }\n\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","castToInt","num","Math","round","clientWidth","document","documentElement","clientHeight","innerWidth","window","innerHeight","documentHeight","max","body","scrollHeight","offsetHeight","windowSizes","this","logWindowSizes","console","log","scrollWidth","offsetWidth","scene","initialized","ticking","saveDisplaySize","init","tick","displayWidth","Util","displayHeight","isNeedResize","requestAnimationFrame","render","elementY","pos","scrollPos","offset","scroll","resize","resizeHeight","Error","scrollListener","bind","addEventListener","resizeListener","stop","undefined","removeEventListener","actors","container","options","handleScrollReset","scrollY","scrollTop","exclude","e","excludeIds","length","elementsFromPoint","clientX","clientY","find","element","includes","id","handleMouseWheel","preventDefault","delta","deltaY","limitY","abs","scrollTo","mouseupListener","mousedownListener","mousewheelListener","passive","el","height","_actors","setDefaults","defaults","elementHeight","getBoundingClientRect","y","add","actor","push","interceptY","frame","startY","endY","name","stickyPlatformHeight","deviceWidth","deviceHeight","style","resizePlatform","platform","position","overflow","createElement","top","left","width","appendChild","parentElement","initElement","getStartPos","getEndPos","SceneModel","d","motion","start","end","SyntaxError","frames","afterBindElement","groupFramesByMotion","reduce","acc","motionName","beforeRender","keys","visible","filter","sort","a","b","make","afterRender","addFrame","addFrames","concat","scrollPosOnFrame","bindElement","findFirstFrame","findFirstMoveMotionFrame","firstFrame","calcStartSize","startWidth","startHeight","calcStartOpacity","Actor","initPosition","initSize","initOpacity","timeFrame","startDimensions","startOpacity","opacity","InitiableActor","data","startX","endX","renderX","x","renderY","sceneInterceptor","Motion","endWidth","endHeight","renderWidth","renderHeight","scrollPosForFrame","renderOpacity","toString","before","after","applyProperties","properties","property"],"sourceRoot":""}