var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{FK:()=>x,xy:()=>p,y_:()=>W,yz:()=>O,Jj:()=>L,Vi:()=>_,sP:()=>o,vJ:()=>r,XC:()=>E,Rp:()=>H,jL:()=>u,nv:()=>d,Zr:()=>i});var n,i=function(){function t(){}return t.castToInt=function(t){return Math.round(t)},t.clientWidth=function(){return document.documentElement.clientWidth},t.clientHeight=function(){return document.documentElement.clientHeight},t.innerWidth=function(){return window.innerWidth},t.innerHeight=function(){return window.innerHeight},t.documentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},t.windowSizes=function(){return{clientWidth:this.clientWidth(),clientHeight:this.clientHeight(),innerWidth:this.innerWidth(),innerHeight:this.innerHeight(),documentHeight:this.documentHeight()}},t.logWindowSizes=function(){console.log("Window size:"),console.log("document.documentElement.clientWidth, clientHeight",document.documentElement.clientWidth,document.documentElement.clientHeight),console.log("document.documentElement.scrollWidth, scrollHeight",document.documentElement.scrollWidth,document.documentElement.scrollHeight),console.log("document.body.scrollWidth, scrollHeight",document.body.scrollWidth,document.body.scrollHeight),console.log("document.body.offsetWidth, offsetHeight",document.body.offsetWidth,document.body.offsetHeight),console.log("document.documentElement.offsetWidth, offsetHeight",document.documentElement.offsetWidth,document.documentElement.offsetHeight),console.log("document.body.clientWidth, clientHeight",document.body.clientWidth,document.body.clientHeight),console.log("window.innerWidth, innerHeight",window.innerWidth,window.innerHeight)},t}(),o=function(){function t(t){this.scene=t,this.initialized=!1,this.ticking=!1,this.saveDisplaySize(),this.init(),this.tick()}return t.prototype.saveDisplaySize=function(){this.displayWidth=i.clientWidth(),this.displayHeight=i.clientHeight()},t.prototype.isNeedResize=function(){return!0},t.prototype.tick=function(){var t=this;this.ticking||(null===window||void 0===window||window.requestAnimationFrame((function(){t.render(t.scene.elementY()),t.ticking=!1})),this.ticking=!0)},t.prototype.pos=function(t){return-(t+this.scene.offset())},t.prototype.scroll=function(){this.tick()},t.prototype.resize=function(){this.isNeedResize()&&(this.scene.resizeHeight(),this.tick())},t.prototype.init=function(){if(this.initialized)throw new Error("Scroll-Rise has already been initialized");this.initialized=!0,this.scrollListener=this.scroll.bind(this),null===window||void 0===window||window.addEventListener("scroll",this.scrollListener),this.resizeListener=this.resize.bind(this),null===window||void 0===window||window.addEventListener("resize",this.resizeListener),this.tick()},t.prototype.stop=function(){if(!this.initialized)throw new Error("Scroll-Rise hasn't yet been initialized");this.initialized=!1,void 0!==this.scrollListener&&(null===window||void 0===window||window.removeEventListener("scroll",this.scrollListener)),void 0!==this.resizeListener&&(null===window||void 0===window||window.removeEventListener("resize",this.resizeListener))},t.prototype.render=function(t){for(var e=0,n=this.scene.actors;e<n.length;e++)n[e].render(this.pos(t),this.scene)},t}(),r=function(){function t(t,e){this.container=t,this.options=e}return t.prototype.handleScrollReset=function(){scrollY=this.container.scrollTop},t.prototype.exclude=function(t){var e,n,i=this;if(null===(n=null===(e=this.options)||void 0===e?void 0:e.excludeIds)||void 0===n?void 0:n.length)return document.elementsFromPoint(t.clientX,t.clientY).find((function(t){var e,n;return null===(n=null===(e=i.options)||void 0===e?void 0:e.excludeIds)||void 0===n?void 0:n.includes(t.id)}))},t.prototype.handleMouseWheel=function(t){var e,n;if(!this.exclude(t)){t.preventDefault();var i=t.deltaY;if(i=(null===(e=this.options)||void 0===e?void 0:e.deltaY)?i*this.options.deltaY:i,(null===(n=this.options)||void 0===n?void 0:n.limitY)&&Math.abs(i)>this.options.limitY&&(i=i>0?this.options.limitY:-this.options.limitY),scrollY+=i,scrollY>0){var o=this.container.scrollHeight-this.container.clientHeight;scrollY>o&&(scrollY=o)}else scrollY=0;null===window||void 0===window||window.scrollTo(0,scrollY)}},t.prototype.init=function(){this.mouseupListener=this.handleScrollReset.bind(this),this.mousedownListener=this.handleScrollReset.bind(this),this.mousewheelListener=this.handleMouseWheel.bind(this),this.container.addEventListener("mouseup",this.mouseupListener,!1),this.container.addEventListener("mousedown",this.mousedownListener,!1),this.container.addEventListener("mousewheel",this.mousewheelListener,{passive:!1}),this.container.addEventListener("DOMMouseScroll",this.mousewheelListener,{passive:!1}),this.container.addEventListener("wheel",this.mousewheelListener,{passive:!1})},t.prototype.stop=function(){this.mouseupListener&&this.container.removeEventListener("mouseup",this.mouseupListener),this.mousedownListener&&this.container.removeEventListener("mousedown",this.mousedownListener),this.mousewheelListener&&(this.container.removeEventListener("mousewheel",this.mousewheelListener),this.container.removeEventListener("DOMMouseScroll",this.mousewheelListener),this.container.removeEventListener("wheel",this.mousewheelListener))},t}(),s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)},c=function(){function t(t,e,n){this.el=t,this.height=e,this.options=n,this._actors=[],this.setDefaults(),this.init()}return t.prototype.setDefaults=function(){this.options=s(s({},this.defaults()),this.options)},t.prototype.defaults=function(){return{offset:function(){return 0}}},t.prototype.offset=function(){return this.options.offset(i.clientWidth(),i.clientHeight(),this.elementHeight())},t.prototype.elementY=function(){return this.el.getBoundingClientRect().y},t.prototype.elementHeight=function(){return this.height(i.clientWidth(),i.clientHeight())},t.prototype.add=function(t){this._actors.push(t)},Object.defineProperty(t.prototype,"actors",{get:function(){return this._actors},enumerable:!1,configurable:!0}),t.prototype.interceptY=function(t,e,n,i){},t}(),l=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=function(){return h=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},h.apply(this,arguments)},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="StickyPlatformScene",e}return l(e,t),e.prototype.defaults=function(){return h(h({},t.prototype.defaults.call(this)),{stickyPlatformHeight:function(t,e){return e}})},e.prototype.resizeHeight=function(){this.el.style.height="".concat(this.height(i.clientWidth(),i.clientHeight()),"px"),this.resizePlatform()},e.prototype.resizePlatform=function(){this.platform.style.height="".concat(this.options.stickyPlatformHeight(i.clientWidth(),i.clientHeight()),"px")},e.prototype.init=function(){this.el.style.position="relative",this.el.style.overflow="visible",this.platform=document.createElement("div"),this.platform.style.position="sticky",this.platform.style.top="0",this.platform.style.left="0",this.platform.style.width="100%",this.resizeHeight(),this.el.appendChild(this.platform)},e.prototype.add=function(e){var n;t.prototype.add.call(this,e),this.el===(null===(n=e.element)||void 0===n?void 0:n.parentElement)&&(this.platform.appendChild(e.element),e.element.style.position="absolute"),e.initElement(this.elementY(),this)},e.prototype.interceptY=function(e,n,i,o){return e<n.getStartPos()?i():e>n.getEndPos()?o():t.prototype.interceptY.call(this,e,n,i,o)},e}(c),a=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="FixedActorsScene",e}return a(e,t),e.prototype.resizeHeight=function(){this.el.style.height="".concat(this.height(i.clientWidth(),i.clientHeight()),"px")},e.prototype.init=function(){this.resizeHeight()},e.prototype.add=function(e){t.prototype.add.call(this,e),e.element.style.position="fixed",e.initElement(this.elementY(),this)},e.prototype.interceptY=function(e,n,o,r){if(e<n.getStartPos())return this.elementY()+o();var s=this.elementHeight()+this.elementY();if(s<i.clientHeight()){var c=i.clientHeight()-s;return r()-c}return t.prototype.interceptY.call(this,e,n,o,r)},e}(c),d=function(){function t(t,e,n){if(void 0===n&&(n=e),this.motion=t,this.start=e,this.end=n,void 0===n)this.end=e;else if(this.getStartPos()>this.getEndPos())throw new SyntaxError('"Start" later than "End" in the frame')}return t.prototype.getStartPos=function(){return this.start(i.clientWidth(),i.clientHeight())},t.prototype.getEndPos=function(){return this.end(i.clientWidth(),i.clientHeight())},t.prototype.length=function(){return this.getEndPos()-this.getStartPos()},t}(),f=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))},y=function(){function t(){this.frames=[]}return t.prototype.afterBindElement=function(){},t.prototype.groupFramesByMotion=function(t){return t.reduce((function(t,e){var n=e.motion.name;return t[n]=t[n]?f(f([],t[n],!0),[e],!1):[e],t}),{})},t.prototype.render=function(t,e){var n;this.beforeRender&&this.beforeRender();for(var o=this.groupFramesByMotion(this.frames),r=0,s=Object.keys(o);r<s.length;r++)if(o[u=s[r]].length>1){var c=o[u].filter((function(e){return t<e.getStartPos()&&t+i.clientHeight()>=e.getStartPos()||t>=e.getStartPos()&&t+i.clientHeight()<=e.getEndPos()||t>=e.getStartPos()&&t<=e.getEndPos()}));1===c.length?o[u]=c:0===c.length&&o[u].length?(o[u].sort((function(t,e){return t.getStartPos()-e.getStartPos()})),t+i.clientHeight()<o[u][0].getStartPos()?o[u]=[o[u][0]]:(o[u].sort((function(t,e){return t.getEndPos()>e.getEndPos()?-1:t.getEndPos()>e.getEndPos()?0:1})),t>o[u][0].getEndPos()&&(o[u]=[o[u][0]]))):(c.sort((function(t,e){return t.getStartPos()-e.getStartPos()})),o[u]=[c[c.length-1]])}if(this.element)for(var l=0,h=Object.keys(o);l<h.length;l++){var u;(null===(n=o[u=h[l]])||void 0===n?void 0:n.length)&&o[u][0].motion.make(t,o[u][0],this.element,e)}this.afterRender&&this.afterRender()},t.prototype.addFrame=function(t){this.frames.push(t)},t.prototype.addFrames=function(t){this.frames=this.frames.concat(t)},t.prototype.initElement=function(t,e){this.element=this.bindElement(t,e),this.afterBindElement()},t}(),g=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.findFirstFrame=function(t){return this.frames.reduce((function(e,n){return n.motion.name===t?e?n.getStartPos()<(null==e?void 0:e.getStartPos())?n:e:n:e||void 0}),void 0)},e.prototype.findFirstMoveMotionFrame=function(){var t=this.findFirstFrame("MoveMotion");if(t)return t;throw new Error('First "MoveMotion" frame wasn\'t found')},e.prototype.calcStartSize=function(){var t=this.findFirstFrame("SizeMotion");if(t){var e=t.motion;return{width:e.startWidth,height:e.startHeight}}throw new Error('First "SizeMotion" frame wasn\'t found')},e.prototype.calcStartOpacity=function(){var t=this.findFirstFrame("OpacityMotion");if(t)return t.motion.start;throw new Error('First "OpacityMotion" frame wasn\'t found')},e.prototype.bindElement=function(t,e){return this.element},e}(y),v=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),w=function(){return w=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},w.apply(this,arguments)},H=function(t){function e(e,n){var i=t.call(this)||this;return i.element=e,i.options=n,i.options=w({initPosition:!0,initSize:!0,initOpacity:!0},i.options),i}return v(e,t),e.prototype.bindElement=function(t,e){var n,o,r;if(this.element){if(null===(n=this.options)||void 0===n?void 0:n.initPosition){var s=this.findFirstMoveMotionFrame();s.motion.make(t,s,this.element,e)}if(null===(o=this.options)||void 0===o?void 0:o.initSize){var c=this.calcStartSize();this.element.style.width="".concat(c.width(i.clientWidth(),i.clientHeight()),"px"),this.element.style.height="".concat(c.height(i.clientWidth(),i.clientHeight()),"px")}if(null===(r=this.options)||void 0===r?void 0:r.initOpacity){var l=this.calcStartOpacity();this.element.style.opacity="".concat(l(i.clientWidth(),i.clientHeight()))}}return this.element},e}(m),P=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_=function(t){function e(e){var n=t.call(this)||this;return n.element=e,n}return P(e,t),e.prototype.bindElement=function(){return this.element},e}(m),W=function(){},b=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),O=function(t){function e(e){var n=t.call(this)||this;return n.name="MoveMotion",n.startX=e.startX,n.endX=e.endX,n.startY=e.startY,n.endY=e.endY,n}return b(e,t),e.prototype.renderX=function(t,e,n){if(n){if(t<e.getStartPos())return void(n.style.left="".concat(this.startX(i.clientWidth(),i.clientHeight()),"px"));if(t>e.getEndPos())return void(n.style.left="".concat(this.endX(i.clientWidth(),i.clientHeight()),"px"));var o=(this.endX(i.clientWidth(),i.clientHeight())-this.startX(i.clientWidth(),i.clientHeight()))/e.length(),r=i.castToInt(this.startX(i.clientWidth(),i.clientHeight())+o*(t-e.getStartPos()));n.style.left="".concat(r,"px")}},e.prototype.renderY=function(t,e,n,o){var r=this,s=function(){return r.startY(i.clientWidth(),i.clientHeight())},c=function(){return r.endY(i.clientWidth(),i.clientHeight())};if(n){var l=(c()-s())/e.length(),h=i.castToInt(s()+l*(e.getStartPos()+t)),u=o.interceptY(t,e,s,c);void 0!==u&&(h=u),n.style.top="".concat(h,"px")}},e.prototype.make=function(t,e,n,i){this.renderX(t,e,n),this.renderY(t,e,n,i)},e}(W),S=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),E=function(t){function e(e){var n=t.call(this)||this;return n.name="SizeMotion",n.startWidth=e.startWidth,n.endWidth=e.endWidth,n.startHeight=e.startHeight,n.endHeight=e.endHeight,n}return S(e,t),e.prototype.renderWidth=function(t,e,n){if(n){if(t<e.getStartPos())return void(n.style.width="".concat(this.startWidth(i.clientWidth(),i.clientHeight()),"px"));if(t>e.getEndPos())return void(n.style.width="".concat(this.endWidth(i.clientWidth(),i.clientHeight()),"px"));var o=(this.endWidth(i.clientWidth(),i.clientHeight())-this.startWidth(i.clientWidth(),i.clientHeight()))/e.length(),r=this.startWidth(i.clientWidth(),i.clientHeight())+o*(t-e.getStartPos());n.style.width="".concat(r,"px")}},e.prototype.renderHeight=function(t,e,n){if(n){if(t<e.getStartPos())return void(n.style.height="".concat(this.startHeight(i.clientWidth(),i.clientHeight()),"px"));if(t>e.getEndPos())return void(n.style.height="".concat(this.endHeight(i.clientWidth(),i.clientHeight()),"px"));var o=(this.endHeight(i.clientWidth(),i.clientHeight())-this.startHeight(i.clientWidth(),i.clientHeight()))/e.length(),r=this.startHeight(i.clientWidth(),i.clientHeight())+o*(t-e.getStartPos());n.style.height="".concat(r,"px")}},e.prototype.make=function(t,e,n){this.renderWidth(t,e,n),this.renderHeight(t,e,n)},e}(W),j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),L=function(t){function e(e){var n=t.call(this)||this;return n.name="OpacityMotion",n.start=e.start,n.end=e.end,n}return j(e,t),e.prototype.renderOpacity=function(t,e,n){if(n){if(t<e.getStartPos())return void(n.style.opacity=this.start(i.clientWidth(),i.clientHeight()).toString());if(t>e.getEndPos())return void(n.style.opacity=this.end(i.clientWidth(),i.clientHeight()).toString());var o=(this.end(i.clientWidth(),i.clientHeight())-this.start(i.clientWidth(),i.clientHeight()))/e.length(),r=this.start(i.clientWidth(),i.clientHeight())+o*(t-e.getStartPos());n.style.opacity=r.toString()}},e.prototype.make=function(t,e,n){this.renderOpacity(t,e,n)},e}(W),z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),x=function(t){function e(e){var n=t.call(this)||this;return n.name="BoundMotion",n.before=e.before,n.after=e.after,n}return z(e,t),e.prototype.applyProperties=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];t.style[o]=e[o]}},e.prototype.make=function(t,e,n){n&&(t<e.getStartPos()?this.applyProperties(n,this.before(i.clientWidth(),i.clientHeight())):this.applyProperties(n,this.after(i.clientWidth(),i.clientHeight())))},e}(W),Y=e.FK,M=e.xy,F=e.y_,k=e.yz,R=e.Jj,A=e.Vi,T=e.sP,C=e.vJ,X=e.XC,B=e.Rp,D=e.jL,I=e.nv,J=e.Zr;export{Y as BoundMotion,M as FixedActorsScene,F as Motion,k as MoveMotion,R as OpacityMotion,A as RefActor,T as ScrollRise,C as ScrollRiseSpeed,X as SizeMotion,B as StaticActor,D as StickyPlatformScene,I as TimeFrame,J as Util};
//# sourceMappingURL=index.es.js.map